<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>My New Post</title>
  <link href="https://cdn.bootcdn.net/ajax/libs/normalize/8.0.1/normalize.min.css" rel="stylesheet">
  
<link rel="stylesheet" href="/hexo/css/markdown.css">

  
<link rel="stylesheet" href="/hexo/css/post.css">

  
<script src="/hexo/js/jquery.js"></script>

<meta name="generator" content="Hexo 5.3.0"></head>
<body>
  <div id="app-book">
    <div id="book-header">
      <a id="home-link" href="/hexo">å›žåˆ°é¦–é¡µ</a>
      <h1 id="book-title">My New Post</h1>
      <span id="book-date">2021-02-07</span>
    </div>
    <div id="book-body">
      <p><div class="table-of-contents"><ul></ul></div></p>
<pre><code class="language-vue"><div class="language-vue extra-class"><pre v-pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$withBase(<span class="token punctuation">'</span>/foo.png<span class="token punctuation">'</span>)<span class="token punctuation">"</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>foo<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
</code></pre></div></code></pre>
<p>ðŸŽ‰</p>
<p>ðŸ’¯</p>
<p>ðŸ˜ƒ</p>

    </div>
    <div id="book-bottom">
      
      <div id="prev">
        <span>ä¸Šä¸€ç¯‡:</span>
        <a href="/hexo/2021/02/07/hello-world/">Hello World</a>
      </div>
      
      
        <div id="next">
          <span>ä¸‹ä¸€ç¯‡:</span>
          <a href="/hexo/2021/01/19/Tuesday/">Tuesday</a>
        </div>
      
    </div>
    <div id="back" title="è¿”å›žé¡¶éƒ¨"></div>
  </div>
</body>
<script>

  var app = {
    backBtn: $('#back'),
    show: false,
    anchorList: {},
    init: function(){
      this.backBtn.on('click', this.scrollTop);
      this.initAnchorList();
      $(window).scroll(this.debounce(this.windowScroll, 30));
      this.anchorClick();
    },
    scrollTop: function(){
      $('body,html').animate({ scrollTop: 0},300);
    },
    windowScroll: function(){
      var offsetArray = Object.keys(app.anchorList);
      var distance = $(window).scrollTop();
      if ( distance > 50 && !app.show) {
        app.backBtn.fadeIn(200);
        app.show = true;
      } 
      if( distance <=50 && app.show ){
        app.backBtn.fadeOut(200);
        app.show = false;
      }     


      var prev = offsetArray[0];
      for(item of offsetArray){
        if(item>(distance+10)){
          target = app.anchorList[prev];
          $(".table-of-contents a").removeClass('active');
          target.addClass("active");
          break;
        }
        prev = item;
      }
    },
    debounce: function(fn, wait) {
      var timeout = null;
      return function() {
        if(timeout !== null) clearTimeout(timeout);
        timeout = setTimeout(fn, wait);
      }
    },
    initAnchorList: function(){
      $(".table-of-contents a").each(function(){
        var id = $(this).attr("href");
        var $target = $(id);
        var targetOffset = $target.offset().top;
        app.anchorList[targetOffset]  = $(this);
      })
    },
    anchorClick: function(){
      $(".table-of-contents a").click(function () {
        if (location.pathname.replace(/^\//, '') == this.pathname.replace(/^\//, '') && location.hostname == this.hostname) {
          var id = $(this).attr("href");
          var $target = $(id);
          $target = $target.length && $target || $('[name=' + this.hash.slice(1) + ']');
          if ($target.length) {
            var targetOffset = $target.offset().top;
            $('html,body').animate( { scrollTop: targetOffset }, 300);
            return false;
          }
        }
      });
    }
  }

  app.init();

</script>
</html>


